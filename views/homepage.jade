doctype html
html
head
    link#bootstrap-css(href='//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css', rel='stylesheet')
    |     
    script(src='//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js')
    |     
    script(src='//code.jquery.com/jquery-1.11.1.min.js')
    |     
    meta(charset='UTF-8')
    |     
    meta(http-equiv='X-UA-Compatible', content='ie=edge')
    |     
    link(href='/stylesheets/homepage.css', rel='stylesheet', type='text/css')
    |     
    link(rel='shortcut icon', href='window.location.reload(true);/images/logo.jpg')
    |     
    title MovieKraken | HomePage
    |     
    script(src='https://unpkg.com/sweetalert/dist/sweetalert.min.js')
    |     
    script(src='https://connect.facebook.net/en_US/sdk.js', async='', defer='')
    |     
    script(async='', defer='', crossorigin='anonymous', src='http://connect.facebook.net/it_IT/sdk.js#xfbml=1&version=v3.2')
    |        
    // sweet alert    
    body.sfbg
    
     // FB-ASINC-INIT      
    script.
     window.fbAsyncInit = function() {
        FB.init({
          appId            : '1159693734481176',
          autoLogAppEvents : true,
          xfbml            : true,
          version          : 'v3.2'
        });

        FB.getLoginStatus(function(response){
          statusChangeCallback(response);
        });
      } ;

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
      
      //funzione di callback
      function statusChangeCallback(response){
        if(response.status==='connected'){
          console.log('Logged in and authenticated');
          setButtons(true);
          testAPI();
        }else{
          console.log('Not authenticated');
          setButtons(false);
        }
      }
      
      function checkLoginState() {
        FB.getLoginStatus(function(response) {
          statusChangeCallback(response);
         });
      }
      

     function setButtons(log){
      if(log){  
        document.getElementById('chat').style.display='block';
        document.getElementById('film').style.display='block';
        document.getElementById('tvshow').style.display='block';
      }else{
       document.getElementById('chat').style.display='none';
       document.getElementById('film').style.display='none';
       document.getElementById('tvshow').style.display='none';
       }
     }

      function logout(){
        FB.logout(function(response){
          setButtons(false);
        });
      }
  
      function testAPI() {
        console.log('Welcome!  Fetching your information.... ');
        FB.api('/me?fields=name,email', function(response) {
          console.log('Successful login for: ' + response.name);
          document.getElementById('profile').innerHTML ='Welcome ' + response.name + ' thanks for logging in!';
        });
      }
      


    // Navigation
    nav.navbar.navbar-expand-md.navbar-dark.bg-dark.fixed-top
      .container
        a.navbar-brand.text-white(href='/') MovieKraken
        |             
        button.navbar-toggler(type='button', data-toggle='collapse', data-target='#navbarsHomepage', aria-controls='navbarsHomepage', aria-expanded='false', aria-label='Toggle navigation')
          span.navbar-toggler-icon
        |             
        .collapse.navbar-collapse(id='navbarsHomepage userlog')
          ul.navbar-nav.ml-auto
            li.nav-item
              #fb-root
              #fb-button.fb-login-button(style='border: none', onlogin='checkLoginState()', data-size='small', data-button-type='login_with', data-auto-logout-link='true', data-use-continue-as='true')   
            |             
            li.nav-item
              #film
                a.nav-link.text-white(href='/film') Film
              
            |                     
            li.nav-item
              #tvshow
                a.nav-link.text-white(href='/tvshow') Serie TV
            |                     
            li.nav-item
              #chat
                a.nav-link.text-white(ihref='/chat') Chat  
            | 

    // Carousel Slider
    #carouselLogo.carousel.slide(data-ride='carousel')
      ol.carousel-indicators
        li.active(data-target='#carouselLogo', data-slide-to='0')
        |             
        li(data-target='#carouselLogo', data-slide-to='1')
        |             
        li(data-target='#carouselLogo', data-slide-to='2')
      |         
      .carousel-inner(role='listbox')
        .carousel-item.active
          img.d-block.img-fluid(src='http://www.facenet.org/wp-content/themes/executive/assets/images/header.jpg', alt='First slide')
        |             
        .carousel-item
          img.d-block.img-fluid(src='http://www.facenet.org/wp-content/themes/executive/assets/images/header.jpg', alt='First slide')
        |             
        .carousel-item
          img.d-block.img-fluid(src='http://www.facenet.org/wp-content/themes/executive/assets/images/header.jpg', alt='First slide')
      |         
      a.carousel-control-prev(href='#carouselLogo', role='button', data-slide='prev')
        span.carousel-control-prev-icon(aria-hidden='true')
        |             
        span.sr-only Previous
      |         
      a.carousel-control-next(href='#carouselLogo', role='button', data-slide='next')
        span.carousel-control-next-icon(aria-hidden='true')
        |             
        span.sr-only Next
    // Carousel Slider
    style.
      #title {
        text-align: center;
      }
      #box {
        margin-top: 1.1%;
        margin-left: 15%;
      }
      #br {
        margin-top: 1.1%;
      }
    // Card
    div.container.container.mt-4.mb-5
      hr.bg-dark.mb-4.w-25
      |       
      .row 
        .col-md-4#box
          .card
            h4.tfilm#title Film             
            a#animation_6(href = "/film")
             img(src="/images/venom.jpg", width="100%")
        |             
        .col-md-4#br
          .card
            h4.tfilm#title Serie TV
            a#animation_6(href="/tvshow")
             img(src="/images/bb.jpg", width="100%")
 
// Footer
footer.footer.bg-dark.text-white
      // Footer Links
      .container.pt-5.pb-2
        .row
          .col-md-3.col-lg-4.col-xl-3
            h4 Information
            |                     
            hr.bg-white.mb-2.mt-0.d-inline-block.mx-auto.w-25
            |                     
            p
              | Progetto realizzato per il corso di Reti di Calcolatori, universit&agrave; Sapienza di Roma.
          |                 
          .col-md-3.col-lg-2.col-xl-2.mx-auto
            h4 Useful links
            |                     
            hr.bg-white.mb-2.mt-0.d-inline-block.mx-auto.w-25
            |                     
            p
              a.text-white(href='#') Home
            |                     
            p
              a.text-white(href='#') About Us
          |                 
          .col-md-4.col-lg-3.col-xl-3
            h4 Contact
            |                     
            hr.bg-white.mb-2.mt-0.d-inline-block.mx-auto.w-25
            |                     
            p
              a(href='https://goo.gl/maps/Z6mkUPT3rin')
                i.fa.fa-home.mr-3.text-white
              |  Piazzale Aldo Moro 7
            |                                        
            p
              i.fa.fa-phone.mr-3
              |  + 06 842 569
      // Footer Links
      hr.bg-white.mx-4.mt-2.mb-1
      // Copyright
      .container-fluid
        p.text-center.m-0.py-1
          | &copy; 2019 Copyright 
          a.text-white(href='https://getbootstrap.com/') MK
      // Copyright
    // Footer
    script(src='/javascripts/registr.js')


// Card
//.container.mb-5
//  .row
//    .col-md-8
//      h3.display-4 La nostra raccolta
//      |                 
//      hr.bg-dark.w-auto.ml-0.mt-3
//      |                 
//      p.lead
//        | Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&apos;s standard dummy text ever since the 1500s
//      |                 
//      p
//        | When an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
//      |                 
//      ul.list-unstyled.pl-4
//        li
//          i.fa.fa-check
//          |  Lorem Ipsum is simply dummy text
//        |                     
//        li
//          i.fa.fa-check
//          |  Lorem Ipsum is simply dummy text
//        |                     
//        li
//          i.fa.fa-check
//          |  Lorem Ipsum is simply dummy text
//      |                 
//      a.btn.btn-outline-primary.rounded-0(href='#')  View All
//    |             
//    .col-md-4.mt-5
//      img.card-img-top(src='https://dummyimage.com/300x300/c7c7c7/000.png', alt='Card image cap')
